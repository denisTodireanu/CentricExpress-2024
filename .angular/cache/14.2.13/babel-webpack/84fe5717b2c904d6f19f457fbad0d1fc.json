{"ast":null,"code":"import { UntypedFormBuilder, UntypedFormControl } from '@angular/forms';\nimport { Subscription } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"../services/trip.service\";\nimport * as i4 from \"@angular/common\";\n\nfunction TripDetailsComponent_p_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r0.description);\n  }\n}\n\nfunction TripDetailsComponent_ng_template_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"textarea\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r2.description);\n  }\n}\n\nfunction TripDetailsComponent_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\");\n  }\n}\n\nfunction TripDetailsComponent_ng_template_22_label_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"label\");\n    i0.ɵɵtext(1, \"No photos available\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction TripDetailsComponent_ng_template_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, TripDetailsComponent_ng_template_22_label_0_Template, 2, 0, \"label\", 19);\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.photos.length === 0);\n  }\n}\n\nfunction TripDetailsComponent_div_24_img_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 25);\n  }\n\n  if (rf & 2) {\n    const photo_r14 = ctx.$implicit;\n    i0.ɵɵproperty(\"src\", photo_r14, i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction TripDetailsComponent_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 20)(1, \"div\", 21);\n    i0.ɵɵtemplate(2, TripDetailsComponent_div_24_img_2_Template, 1, 1, \"img\", 22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"input\", 23, 24);\n    i0.ɵɵlistener(\"change\", function TripDetailsComponent_div_24_Template_input_change_3_listener($event) {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.handleFileInput($event.target.files));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"img\", 25);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r6.photos);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"src\", ctx_r6.imageUrl, i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction TripDetailsComponent_div_25_img_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 25);\n  }\n\n  if (rf & 2) {\n    const photo_r18 = ctx.$implicit;\n    i0.ɵɵproperty(\"src\", photo_r18, i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction TripDetailsComponent_div_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 26);\n    i0.ɵɵtemplate(1, TripDetailsComponent_div_25_img_1_Template, 1, 1, \"img\", 22);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r7.photos);\n  }\n}\n\nfunction TripDetailsComponent_button_26_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function TripDetailsComponent_button_26_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r20);\n      const ctx_r19 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r19.startUpdating());\n    });\n    i0.ɵɵelementStart(1, \"span\");\n    i0.ɵɵtext(2, \" Update trip\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction TripDetailsComponent_ng_template_27_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r22 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function TripDetailsComponent_ng_template_27_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r22);\n      const ctx_r21 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r21.save());\n    });\n    i0.ɵɵelementStart(1, \"span\");\n    i0.ɵɵtext(2, \"Save trip\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nexport let TripDetailsComponent = /*#__PURE__*/(() => {\n  class TripDetailsComponent {\n    constructor(router, activatedRoute, formBuilder, service) {\n      this.router = router;\n      this.activatedRoute = activatedRoute;\n      this.formBuilder = formBuilder;\n      this.service = service;\n      this.photos = [];\n      this.routeSub = new Subscription();\n    }\n\n    get description() {\n      return this.formGroup.get('description').value;\n    }\n\n    get isFormDisabled() {\n      return this.formGroup.disabled;\n    }\n\n    ngOnInit() {\n      this.formGroup = this.formBuilder.group({\n        id: new UntypedFormControl(),\n        title: new UntypedFormControl(),\n        description: new UntypedFormControl(),\n        private: new UntypedFormControl(false)\n      });\n\n      if (this.router.url === '/create-trip') {\n        this.isAddMode = true;\n      } else {\n        //Getting id from url\n        this.routeSub = this.activatedRoute.params.subscribe(params => {\n          //Getting details for the trip with the id found\n          this.service.get(params['id']).subscribe(data => {\n            this.formGroup.patchValue(data);\n          });\n          this.formGroup.disable();\n        });\n        this.isAddMode = false;\n      }\n\n      this.isAdmin = true;\n    }\n\n    ngOnDestroy() {\n      this.routeSub.unsubscribe();\n    }\n\n    startUpdating() {\n      this.formGroup.enable();\n    }\n\n    save() {\n      if (this.isAddMode) {\n        this.service.post(this.formGroup.getRawValue()).subscribe();\n        this.router.navigate(['list']);\n      } else {\n        this.service.patch(this.formGroup.getRawValue()).subscribe();\n      }\n\n      this.photos.push(this.imageUrl);\n      this.imageUrl = null;\n      this.formGroup.disable();\n    }\n\n    handleFileInput(file) {\n      this.fileToUpload = file.item(0);\n      let reader = new FileReader();\n\n      reader.onload = event => {\n        this.imageUrl = event.target.result;\n      };\n\n      reader.readAsDataURL(this.fileToUpload);\n    }\n\n  }\n\n  TripDetailsComponent.ɵfac = function TripDetailsComponent_Factory(t) {\n    return new (t || TripDetailsComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.UntypedFormBuilder), i0.ɵɵdirectiveInject(i3.TripService));\n  };\n\n  TripDetailsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: TripDetailsComponent,\n    selectors: [[\"app-trip-details\"]],\n    features: [i0.ɵɵProvidersFeature([UntypedFormBuilder])],\n    decls: 29,\n    vars: 9,\n    consts: [[1, \"flex-row-space-around\"], [1, \"image-section\"], [\"src\", \"../../assets/images/trip.svg\", \"alt\", \"Trip image\"], [1, \"form-section\"], [3, \"formGroup\"], [1, \"form-group\"], [\"type\", \"text\", \"placeholder\", \"Enter trip name\", \"formControlName\", \"title\"], [4, \"ngIf\", \"ngIfElse\"], [\"notEditable\", \"\"], [\"type\", \"checkbox\", \"formControlName\", \"private\"], [1, \"photos\"], [1, \"photos-title\"], [1, \"photos-list\"], [\"noPhotos\", \"\"], [\"class\", \"add-photos\", 4, \"ngIf\"], [\"class\", \"added-photos\", 4, \"ngIf\"], [\"type\", \"button\", 3, \"click\", 4, \"ngIf\", \"ngIfElse\"], [\"saveButton\", \"\"], [\"contenteditable\", \"true\", \"placeholder\", \"Enter trip description\", \"formControlName\", \"description\", 1, \"trip-description\"], [4, \"ngIf\"], [1, \"add-photos\"], [1, \"photo-file-container\"], [\"class\", \"photo-file\", 3, \"src\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"file\", 3, \"change\"], [\"Image\", \"\"], [1, \"photo-file\", 3, \"src\"], [1, \"added-photos\"], [\"type\", \"button\", 3, \"click\"]],\n    template: function TripDetailsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"h1\");\n        i0.ɵɵtext(1, \" Trip Details\\n\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"div\", 0)(3, \"section\", 1);\n        i0.ɵɵelement(4, \"img\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"section\", 3)(6, \"form\", 4)(7, \"div\", 5);\n        i0.ɵɵelement(8, \"input\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"div\", 5);\n        i0.ɵɵtemplate(10, TripDetailsComponent_p_10_Template, 2, 1, \"p\", 7);\n        i0.ɵɵtemplate(11, TripDetailsComponent_ng_template_11_Template, 2, 1, \"ng-template\", null, 8, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"div\", 5)(14, \"label\");\n        i0.ɵɵtext(15, \" Is this a private trip\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(16, \"input\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"div\", 10)(18, \"label\", 11);\n        i0.ɵɵtext(19, \"Photos\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"div\", 12);\n        i0.ɵɵtemplate(21, TripDetailsComponent_div_21_Template, 1, 0, \"div\", 7);\n        i0.ɵɵtemplate(22, TripDetailsComponent_ng_template_22_Template, 1, 1, \"ng-template\", null, 13, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵtemplate(24, TripDetailsComponent_div_24_Template, 6, 2, \"div\", 14);\n        i0.ɵɵtemplate(25, TripDetailsComponent_div_25_Template, 2, 1, \"div\", 15);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(26, TripDetailsComponent_button_26_Template, 3, 0, \"button\", 16);\n        i0.ɵɵtemplate(27, TripDetailsComponent_ng_template_27_Template, 3, 0, \"ng-template\", null, 17, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵelementEnd()()();\n      }\n\n      if (rf & 2) {\n        const _r1 = i0.ɵɵreference(12);\n\n        const _r4 = i0.ɵɵreference(23);\n\n        const _r9 = i0.ɵɵreference(28);\n\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"formGroup\", ctx.formGroup);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", ctx.isFormDisabled)(\"ngIfElse\", _r1);\n        i0.ɵɵadvance(11);\n        i0.ɵɵproperty(\"ngIf\", ctx.photos.length > 0)(\"ngIfElse\", _r4);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", !ctx.isFormDisabled);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isFormDisabled);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isFormDisabled)(\"ngIfElse\", _r9);\n      }\n    },\n    dependencies: [i4.NgForOf, i4.NgIf, i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.CheckboxControlValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.FormControlName],\n    styles: [\"h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], label[_ngcontent-%COMP%], p[_ngcontent-%COMP%], div[_ngcontent-%COMP%], span[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{font-family:Open Sans!important;color:#3a4870!important}.flex-row-start[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:start}.flex-row-end[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:end}.flex-row-center[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center}.flex-row-space-betwen[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.flex-row-space-around[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around}.flex-row-space-evenly[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-evenly}h1[_ngcontent-%COMP%]{margin-left:20px}.flex-row-space-around[_ngcontent-%COMP%]{margin:20px}.image-section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80%}.form-section[_ngcontent-%COMP%]{width:50%;padding:50px;display:flex;flex-direction:column;justify-content:space-evenly;font-family:Open Sans;background-color:#fff;border-radius:8px;box-shadow:0 0 8px #00175714}.add-photos[_ngcontent-%COMP%]{display:flex;flex-direction:column}.photo-file[_ngcontent-%COMP%]{width:100px}.photos-title[_ngcontent-%COMP%]{font-size:20px;font-weight:700}.photos[_ngcontent-%COMP%]{display:flex;flex-direction:column}.photos[_ngcontent-%COMP%]   .photos-title[_ngcontent-%COMP%]{margin-bottom:15px}.trip-description[_ngcontent-%COMP%]{width:99%;min-height:150px;font-family:Open Sans;font-size:16px;font-weight:200}.form-group[_ngcontent-%COMP%]{overflow:hidden}label[_ngcontent-%COMP%]{margin-right:10px;font-size:16px;font-weight:400}input[type=text][_ngcontent-%COMP%]{width:100%;display:block;border:none;padding:6px 30px;font-family:Open Sans;box-sizing:border-box;text-align:center;outline:none;font-size:20px;font-weight:600;background-color:#fff}input[type=text][_ngcontent-%COMP%]:focus{border-bottom:1px solid #999}p[_ngcontent-%COMP%]{font-size:16px;font-weight:200}button[_ngcontent-%COMP%]{background-color:#27ae60;border:0;outline:0;cursor:pointer;width:20%;height:40px;border-radius:8px;font-family:Open Sans;font-weight:700}button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff!important}@media (max-width: 900px){.flex-row-space-around[_ngcontent-%COMP%]{flex-direction:column}img[_ngcontent-%COMP%]{max-width:100%}}\"]\n  });\n  return TripDetailsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}